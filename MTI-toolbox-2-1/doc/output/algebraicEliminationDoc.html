<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      -->
<title>algebraicElimination</title>
<meta name="generator" content="MATLAB 24.1">
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.date" content="2024-06-24">
<meta name="DC.source" content="algebraicEliminationDoc.m">
<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
</head>
<body>
<div class="content">
<h1>algebraicElimination</h1>
<!--introduction-->
<p>Algebraicly eliminate unnecessary algebraic variabels and equations of a dmss model while maintaining multilinear structure.</p>
<!--/introduction-->
<h2>Contents</h2>
<div>
<ul>
<li>
<a href="#1">Syntax</a>
</li>
<li>
<a href="#2">Description</a>
</li>
<li>
<a href="#3">Examples</a>
</li>
<li>
<a href="#11">References</a>
</li>
<li>
<a href="#12">See also</a>
</li>
</ul>
</div>
<h2 id="1">Syntax</h2>
<p>sys = algebraicElimination(sys) Algebraicly eliminate all unnecessary algebraic variabels and equations of sys.</p>
<p>sys = algebraicElimination(sys, analysisPoints) Algebraicly eliminate unnecessary algebraic variabels and equations of sys, but the algebraic variables which index is in analysisPoints (array).</p>
<h2 id="2">Description</h2>
<p>The algorithm algebraicElimination() checks if algebraic variables can be eliminated while maintaining multilinear structure (no additional exponents) and if so the variable and an according algebraic equation will be reduced by manipulating the structure matrix sys.H.F and parameter matrix sys.H.phi of the decomposed model tensor sys.H.</p>
<p>The algortihm only allows for numeric parameter values.</p>
<h2 id="3">Examples</h2>
<p>The following equations describe a simple HVAC system</p>
<pre class="codeinput">Eq =                            [<span class="string">"m*xp1 - y4 - y2 = 0"</span>;<span class="keyword">...</span>
                                      <span class="string">"m*xp2 - y3 = 0"</span>;<span class="keyword">...</span>
                 <span class="string">"x1 - c_d*y1 - r0*x2 - c_v*x2*y1 = 0"</span>;<span class="keyword">...</span>
<span class="string">"y2 + u1*x1 - c_d*u1*u2 - r0*u1*u3 - c_v*u1*u2*u3 = 0"</span>;<span class="keyword">...</span>
                              <span class="string">"y3 - u1*u3 + u1*x2 = 0"</span>;<span class="keyword">...</span>
                            <span class="string">"y4 + A*k*u4 - A*k*y1 = 0"</span>];
</pre>
<p>which can be converted into a continuous-time dmss model by</p>
<pre class="codeinput">sys = sym2dmss(Eq, 0)
</pre>
<pre class="codeoutput">Reduced by 5 column(s) and 0 equation(s) with trivial Reduction due to duplications.

sys = 

  dmss with properties:

                H: [1&times;1 hyCPN1]
                n: 2
                m: 4
                p: 4
      outputIndex: [1&times;1 struct]
              nEq: 6
        stateName: [0&times;0 string]
        stateUnit: [0&times;0 string]
    algebraicName: [0&times;0 string]
    algebraicUnit: [0&times;0 string]
        inputName: [0&times;0 string]
        inputUnit: [0&times;0 string]
               ts: 0

</pre>
<p>which serves as an example system. For the elimination algorithm all parameters must have numeric values.</p>
<pre class="codeinput">symParameters = [sym(<span class="string">"m"</span>), sym(<span class="string">"c_d"</span>), sym(<span class="string">"c_v"</span>), sym(<span class="string">"r0"</span>), sym(<span class="string">"A"</span>), sym(<span class="string">"k"</span>)];
numParameters = [9.03*11.33*3.4*1.225, 1006, 1860, 2501*10^3, 2*(9.03+11.33)*3.4 + 9.03*11.33, 3];
sys = sys.replaceSymbolicParameters(symParameters, numParameters);
</pre>
<p>The system can algebraicly reduced by all unnecessary algebraic variables y and equations by</p>
<pre class="codeinput">sysReduced = sys.algebraicElimination()
</pre>
<pre class="codeoutput">System reduced algebraicly by 3 algebraic variable(s) and 3 equation(s).

sysReduced = 

  dmss with properties:

                H: [1&times;1 hyCPN1]
                n: 2
                m: 4
                p: 1
      outputIndex: [1&times;1 struct]
              nEq: 3
        stateName: [0&times;0 string]
        stateUnit: [0&times;0 string]
    algebraicName: [0&times;0 string]
    algebraicUnit: [0&times;0 string]
        inputName: [0&times;0 string]
        inputUnit: [0&times;0 string]
               ts: 0

</pre>
<p>The system of equations can be viewed by</p>
<pre class="codeinput">disp(sysReduced.symbolicEquations)
</pre>
<pre class="codeoutput">(5327308314702627*u4)/18446744073709551616 + (3142958862605315*xp1)/18446744073709551616 - (5327308314702627*y1)/18446744073709551616 - (3710000907267455*u1*u2)/9223372036854775808 - u1*u3 + (3776382633242419*u1*x1)/9444732965739290427392 - (1714861254353247*u1*u2*u3)/2305843009213693952 == 0
                                                                                                                                                                                               xp2 - (5411243405769867*u1*u3)/2305843009213693952 + (5411243405769867*u1*x2)/2305843009213693952 == 0
                                                                                                                                                    (3776382633242419*x1)/9444732965739290427392 - x2 - (3710000907267455*y1)/9223372036854775808 - (1714861254353247*x2*y1)/2305843009213693952 == 0
 
</pre>
<p>By simulation it can be shown that results maintain.</p>
<pre class="codeinput">t = [0, 60];
x0 = [75000; 0.018];
u = [150/1.225, 18, 0.01, 32] .* ones(length(t),1);
rng(100)
u = u .* (0.9 + rand(size(u))/10);

tic()
simout = dmsim(sys, x0, t, u);
t1 = toc();

tic()
simoutReduced = dmsim(sysReduced, x0, t, u);
t2 = toc();

figure()
hold <span class="string">on</span>
plot(simout.tsim, nan(length(simout.tsim), 1), <span class="string">"r-"</span>, LineWidth=1.2)
plot(simoutReduced.tsim, nan(length(simoutReduced.tsim), 1), <span class="string">"k--"</span>, LineWidth=1.2)
plot(simout.tsim, [simout.y(:,1) ,simout.x(:,2)*1e3], <span class="string">"r-"</span>, LineWidth=0.8);
plot(simoutReduced.tsim, [simoutReduced.y(:,1) ,simoutReduced.x(:,2)*1e3], <span class="string">"k--"</span>, LineWidth=1.2);
grid <span class="string">on</span>
legend([sprintf(<span class="string">"full model: %.3f sec."</span>, t1), sprintf(<span class="string">"reduced model: %.3f sec."</span>, t2)], <span class="string">"Location"</span>,<span class="string">"southeast"</span>)
hold <span class="string">off</span>
</pre>
<pre class="codeoutput">Seperation in 1 subset(s) with 6 subproblem(s), from which 6 are explicit solvable.Seperation in 1 subset(s) with 3 subproblem(s), from which 3 are explicit solvable.</pre>
<img vspace="5" hspace="5" src="algebraicEliminationDoc_01.png" alt=""> <p>If there are certain variables which should not be eliminated, e.g. because they are of special interest for analysis, their indexes can be parsed as additional input for the elimination algorithm. E.g. the y2 and y3 are of special interest, representing the transfered heat and humdity to the air flow of the air conditioning system.</p>
<pre class="codeinput">sysReduced = sys.algebraicElimination([2, 3])
</pre>
<pre class="codeoutput">System reduced algebraicly by 1 algebraic variable(s) and 1 equation(s).

sysReduced = 

  dmss with properties:

                H: [1&times;1 hyCPN1]
                n: 2
                m: 4
                p: 3
      outputIndex: [1&times;1 struct]
              nEq: 5
        stateName: [0&times;0 string]
        stateUnit: [0&times;0 string]
    algebraicName: [0&times;0 string]
    algebraicUnit: [0&times;0 string]
        inputName: [0&times;0 string]
        inputUnit: [0&times;0 string]
               ts: 0

</pre>
<p>The system of equations can be viewed by</p>
<pre class="codeinput">disp(sysReduced.symbolicEquations)
</pre>
<pre class="codeoutput">                                                                                                          u4 + (5313988801213287*xp1)/9007199254740992 - y1 - (3192478155045233*y2)/2305843009213693952 == 0
                                                                                                                                                        xp2 - (5411243405769867*y3)/2305843009213693952 == 0
                                                           (3776382633242419*x1)/9444732965739290427392 - x2 - (3710000907267455*y1)/9223372036854775808 - (1714861254353247*x2*y1)/2305843009213693952 == 0
(3776382633242419*y2)/9444732965739290427392 - (3710000907267455*u1*u2)/9223372036854775808 - u1*u3 + (3776382633242419*u1*x1)/9444732965739290427392 - (1714861254353247*u1*u2*u3)/2305843009213693952 == 0
                                                                                                                                                                                     y3 - u1*u3 + u1*x2 == 0
 
</pre>
<h2 id="11">References</h2>
<h2 id="12">See also</h2>
<p>
<a href="dmssDoc.html">dmss</a>, <a href="sym2dmssDoc.html">sym2dmss</a>, <a href="replaceSymbolicParametersDoc.html">replaceSymbolicParameters</a>, <a href="dmsimDoc.html">dmsim</a>
</p>
<p>Author(s): Torben Warnecke</p>
<p class="footer">
<br>
<a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2024a</a>
<br>
</p>
</div>
<!--
##### SOURCE BEGIN #####
%% algebraicElimination
% Algebraicly eliminate unnecessary algebraic variabels and equations of a dmss model while
% maintaining multilinear structure.
%% Syntax
% sys = algebraicElimination(sys) Algebraicly eliminate all unnecessary
% algebraic variabels and equations of sys.
%
% sys = algebraicElimination(sys, analysisPoints) Algebraicly eliminate unnecessary
% algebraic variabels and equations of sys, but the algebraic variables
% which index is in analysisPoints (array).
%% Description
% The algorithm algebraicElimination() checks if algebraic variables can be
% eliminated while maintaining multilinear structure (no additional
% exponents) and if so the variable and an according algebraic equation will be
% reduced by manipulating the structure matrix sys.H.F and parameter matrix
% sys.H.phi of the decomposed model tensor sys.H.
%
% The algortihm only allows for numeric parameter values.
%% Examples
% The following equations describe a simple HVAC system
Eq =                            ["m*xp1 - y4 - y2 = 0";...
                                      "m*xp2 - y3 = 0";...
                 "x1 - c_d*y1 - r0*x2 - c_v*x2*y1 = 0";...
"y2 + u1*x1 - c_d*u1*u2 - r0*u1*u3 - c_v*u1*u2*u3 = 0";...
                              "y3 - u1*u3 + u1*x2 = 0";...
                            "y4 + A*k*u4 - A*k*y1 = 0"];
%%
% which can be converted into a continuous-time dmss model by
sys = sym2dmss(Eq, 0)
%%
% which serves as an example system.
% For the elimination algorithm all parameters must have numeric values.
symParameters = [sym("m"), sym("c_d"), sym("c_v"), sym("r0"), sym("A"), sym("k")];
numParameters = [9.03*11.33*3.4*1.225, 1006, 1860, 2501*10^3, 2*(9.03+11.33)*3.4 + 9.03*11.33, 3];
sys = sys.replaceSymbolicParameters(symParameters, numParameters);
%%
% The system can algebraicly reduced by all unnecessary algebraic variables
% y and equations by
sysReduced = sys.algebraicElimination()
%%
% The system of equations can be viewed by
disp(sysReduced.symbolicEquations)
%% 
% By simulation it can be shown that results maintain.
t = [0, 60];
x0 = [75000; 0.018];
u = [150/1.225, 18, 0.01, 32] .* ones(length(t),1);
rng(100)
u = u .* (0.9 + rand(size(u))/10);

tic()
simout = dmsim(sys, x0, t, u);
t1 = toc();

tic()
simoutReduced = dmsim(sysReduced, x0, t, u);
t2 = toc();

figure()
hold on
plot(simout.tsim, nan(length(simout.tsim), 1), "r-", LineWidth=1.2)
plot(simoutReduced.tsim, nan(length(simoutReduced.tsim), 1), "kREPLACE_WITH_DASH_DASH", LineWidth=1.2)
plot(simout.tsim, [simout.y(:,1) ,simout.x(:,2)*1e3], "r-", LineWidth=0.8);
plot(simoutReduced.tsim, [simoutReduced.y(:,1) ,simoutReduced.x(:,2)*1e3], "kREPLACE_WITH_DASH_DASH", LineWidth=1.2);
grid on
legend([sprintf("full model: %.3f sec.", t1), sprintf("reduced model: %.3f sec.", t2)], "Location","southeast")
hold off

%%
% If there are certain variables which should not be eliminated, e.g.
% because they are of special interest for analysis, their indexes can be
% parsed as additional input for the elimination algorithm. E.g. the y2 and
% y3 are of special interest, representing the transfered heat and humdity
% to the air flow of the air conditioning system.
sysReduced = sys.algebraicElimination([2, 3])
%%
% The system of equations can be viewed by
disp(sysReduced.symbolicEquations)

%% References
%
%% See also
% <dmssDoc.html dmss>,
% <sym2dmssDoc.html sym2dmss>,
% <replaceSymbolicParametersDoc.html replaceSymbolicParameters>,
% <dmsimDoc.html dmsim>
%
%
% Author(s): Torben Warnecke
##### SOURCE END #####
-->
</body>
</html>
