<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      -->
<title>append</title>
<meta name="generator" content="MATLAB 24.1">
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.date" content="2024-06-24">
<meta name="DC.source" content="appendDoc.m">
<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
</head>
<body>
<div class="content">
<h1>append</h1>
<!--introduction-->
<p>Appends multiple dmss models (diagonally).</p>
<!--/introduction-->
<h2>Contents</h2>
<div>
<ul>
<li>
<a href="#1">Syntax</a>
</li>
<li>
<a href="#2">Description</a>
</li>
<li>
<a href="#3">Example</a>
</li>
<li>
<a href="#8">References</a>
</li>
<li>
<a href="#9">See also</a>
</li>
</ul>
</div>
<h2 id="1">Syntax</h2>
<p>sys = sys1.append(sys2, sys3, ..., sysn) Appends multiple dmss models in a diagonal fashion.</p>
<h2 id="2">Description</h2>
<p>The decomposed tensor matrices (structure matrix sys.H.F and parameter matrix sys.H.phi) will be appended diagonally, as example:</p>
<p>sys.H.F.state = [sys1.H.F.state, 0; 0, sys2.H.F.state] -&gt; similar with the other sub matrices.</p>
<p>sys.H.phi.equality = [sys1.H.phi.equality, 0; 0, sys2.H.phi.equality]</p>
<p>The number of variables of the resulting system is the sum of the number of variables of the appended systems. To connect systems via variable index matrices, they must be appended first.</p>
<h2 id="3">Example</h2>
<p>
<b>Appending component models of a (simplified) HVAC system</b>
</p>
<p>The supplied room of an HVAC system can be modelled by its power and transport balance, as well as the enthalpy equation for the humid air.</p>
<pre class="codeinput">powerBalance = [<span class="string">"0 = -m*dh1 + p1 + p2"</span>];
transportBalance = [<span class="string">"0 = -m*dh2 + p3"</span>];
enthalpy = [<span class="string">"h1 = c_d * T1 + c_v * T1 * h2 + r0 * h2"</span>];
room = sym2dmss([powerBalance; transportBalance; enthalpy], 0, [<span class="string">"dh"</span>, <span class="string">"h"</span>, <span class="string">"p"</span>, <span class="string">"T"</span>]);
</pre>
<p>where h1 is the room air enthalpy, h2 is the absolute room air humidity, dh1 and dh2 are their derivatives, T1 is the room temperature, p1 is the heat transported by the air flow of the air conditioning system (either heating or cooling the room air), p2 is the heat loss to the environment and p3 is the water vapor mass flow transported by the air flow of the air conditioning system (either humidifying or dehumidifying the room air).</p>
<p>The energy and humidity transfer by the air conditioning system can be modelled by the following equations</p>
<pre class="codeinput">airConditioning = [<span class="string">"y1 = c_d*u1*u2 + c_v*u1*u2*u3 + r0*u1*u3 - u1*u4"</span>;<span class="keyword">...</span>
                    <span class="string">"y2 = u1*u3 - u1*u5"</span>];
airConditioning = sym2dmss(airConditioning, 0, [<span class="string">"dx"</span>, <span class="string">"x"</span>, <span class="string">"u"</span>, <span class="string">"y"</span>]);
</pre>
<pre class="codeoutput">Reduced by 1 column(s) and 0 equation(s) with trivial Reduction due to duplications.
</pre>
<p>where y1 corresponds to the power transported by the air flow of the air conditioning system, y2 to the water vapor mass flow transported by the air flow of the air conditioning system, u1 to the supplied mass flow of air, u2 to the supply temperature, u3 to the supply humidity, u4 to the rooms enthalpy and u5 to the rooms absolute humidity.</p>
<p>Additionally the heating loss to the environment can be calculated by</p>
<pre class="codeinput">loss = [<span class="string">"y1 = k*A*(u1-u2)"</span>];
loss = sym2dmss(loss, 0, [<span class="string">"dx"</span>, <span class="string">"x"</span>, <span class="string">"u"</span>, <span class="string">"y"</span>]);
</pre>
<p>where y1 is the heat loss, u1 is the ambient temperature and u2 is the rooms temperature.</p>
<p>The component models can be appended to obtain an overall model of the system</p>
<pre class="codeinput">sys = append(room, airConditioning, loss);
disp(sys.symbolicEquations)
</pre>
<pre class="codeoutput error">Unable to perform assignment because value of type 'sym' is not convertible to 'double'.

Error in dmss/append/insertDiagonally (line 146)
        Mout.c(idxRows, idxCols) = M2.c;

Error in dmss/append (line 92)
    sysOut.H.phi.equality = insertDiagonally(sysOut.H.phi.equality, sys2.H.phi.equality, nEqi+1:nEqi+sys2.nEq, Ri+1:Ri+R2);

Error in appendDoc (line 56)
sys = append(room, airConditioning, loss);

Caused by:
    Error using mupadengine/feval2char
    Unable to convert expression containing symbolic variables into double array. Apply 'subs' function first to substitute values for variables</pre>
<p>Due to the appending the number of variables as well as their index is increasing accordingly.</p>
<p>The input and output signals can be connected by using connection matrices, where the first column corresponds to the input index and the second column to the state/algebraic signal index.</p>
<pre class="codeinput">stateInputConnection = [7 1; 8 2];
algebraicInputConnection = [9 1; 1 2; 3 3; 2 4];
similarInputs = [];
sys = sys.connect(stateInputConnection, algebraicInputConnection, [], similarInputs);

disp(sys.symbolicEquations)
</pre>
<h2 id="8">References</h2>
<h2 id="9">See also</h2>
<p>
<a href="dmssDoc.html">dmss</a>, <a href="connectDoc.html">connect</a>, <a href="hyCPN1Doc.html">hyCPN1</a>, <a href="sym2dmssDoc.html">sym2dmss</a>
</p>
<p>Author(s): Torben Warnecke</p>
<p class="footer">
<br>
<a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2024a</a>
<br>
</p>
</div>
<!--
##### SOURCE BEGIN #####
%% append
% Appends multiple dmss models (diagonally).
%% Syntax
% sys = sys1.append(sys2, sys3, ..., sysn) Appends multiple dmss models in
% a diagonal fashion.
%% Description
% The decomposed tensor matrices (structure matrix sys.H.F and parameter
% matrix sys.H.phi) will be appended diagonally, as example:
%
% sys.H.F.state = [sys1.H.F.state, 0; 0, sys2.H.F.state] -> similar with
% the other sub matrices.
%
% sys.H.phi.equality = [sys1.H.phi.equality, 0; 0, sys2.H.phi.equality]
%
% The number of variables of the resulting system is the sum of the number
% of variables of the appended systems.
% To connect systems via variable index matrices, they must be appended
% first.
%% Example
% *Appending component models of a (simplified) HVAC system*
% 
% The supplied room of an HVAC system can be modelled by its power and
% transport balance, as well as the enthalpy equation for the humid air.
powerBalance = ["0 = -m*dh1 + p1 + p2"];
transportBalance = ["0 = -m*dh2 + p3"];
enthalpy = ["h1 = c_d * T1 + c_v * T1 * h2 + r0 * h2"];
room = sym2dmss([powerBalance; transportBalance; enthalpy], 0, ["dh", "h", "p", "T"]);
%%
% where h1 is the room air enthalpy, h2 is the absolute room air humidity, dh1 and dh2 are their derivatives, T1 is the room temperature, p1 is the heat
% transported by the air flow of the air conditioning system (either heating or cooling the room air), p2 is the
% heat loss to the environment and p3 is the water vapor mass flow
% transported by the air flow of the air conditioning system (either humidifying
% or dehumidifying the room air).
%
% The energy and humidity transfer by the air conditioning system can be
% modelled by the following equations
airConditioning = ["y1 = c_d*u1*u2 + c_v*u1*u2*u3 + r0*u1*u3 - u1*u4";...
                    "y2 = u1*u3 - u1*u5"];
airConditioning = sym2dmss(airConditioning, 0, ["dx", "x", "u", "y"]);
%%
% where y1 corresponds to the power transported by the air flow of the air
% conditioning system, y2 to the water vapor mass flow transported by the air
% flow of the air conditioning system, u1 to the supplied mass flow of air, u2
% to the supply temperature, u3 to the supply humidity, u4 to the rooms
% enthalpy and u5 to the rooms absolute humidity.
%
% Additionally the heating loss to the environment can be calculated by
loss = ["y1 = k*A*(u1-u2)"];
loss = sym2dmss(loss, 0, ["dx", "x", "u", "y"]);
%%
% where y1 is the heat loss, u1 is the ambient temperature and u2 is the
% rooms temperature.
%
% The component models can be appended to obtain an overall model of the
% system
sys = append(room, airConditioning, loss);
disp(sys.symbolicEquations)
%%
% Due to the appending the number of variables as well
% as their index is increasing accordingly. 
% 
% The input and output signals can be connected by using connection matrices, where the first column corresponds to the input
% index and the second column to the state/algebraic signal index.
stateInputConnection = [7 1; 8 2];
algebraicInputConnection = [9 1; 1 2; 3 3; 2 4];
similarInputs = [];
sys = sys.connect(stateInputConnection, algebraicInputConnection, [], similarInputs);

disp(sys.symbolicEquations)

%% References
%
%% See also
% <dmssDoc.html dmss>,
% <connectDoc.html connect>,
% <hyCPN1Doc.html hyCPN1>,
% <sym2dmssDoc.html sym2dmss>
%
%
% Author(s): Torben Warnecke
##### SOURCE END #####
-->
</body>
</html>
